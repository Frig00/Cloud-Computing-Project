{"openapi":"3.0.0","info":{"title":"Test swagger","description":"Testing the Fastify swagger API","version":"0.1.0"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{}},"paths":{"/":{"get":{"summary":"Welcome endpoint","tags":["Root"],"description":"Returns a welcome message","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"]}}}}}}},"/auth/login":{"post":{"summary":"Login endpoint","tags":["Auth"],"description":"User login","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"userId":{"type":"string"},"password":{"type":"string"}},"required":["userId","password"]}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"userId":{"type":"string"},"name":{"type":"string"},"profilePictureUrl":{"anyOf":[{"type":"string"},{"type":"null"}]}},"required":["userId","name","profilePictureUrl"]}},"required":["token","user"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/auth/signup":{"post":{"summary":"Sign up endpoint","tags":["Auth"],"description":"User sign up","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"userId":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"}},"required":["userId","password","name"]}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/auth/protected":{"get":{"summary":"Protected endpoint requiring JWT","tags":["Auth"],"description":"Protected endpoint","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/auth/github":{"get":{"summary":"GitHub authentication","tags":["Auth"],"description":"Initiate authentication with GitHub","responses":{"302":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/auth/github/callback":{"get":{"summary":"Process GitHub authentication callback","tags":["Auth"],"description":"GitHub OAuth callback endpoint","parameters":[{"schema":{"type":"string"},"in":"query","name":"code","required":true}],"responses":{"302":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"userId":{"type":"string"},"name":{"type":"string"},"profilePictureUrl":{"anyOf":[{"type":"string"},{"type":"null"}]}},"required":["userId","name","profilePictureUrl"]}},"required":["token","user"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/auth/check":{"get":{"summary":"Login check","tags":["Auth"],"description":"Login check","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"user":{"type":"object","properties":{"userId":{"type":"string"},"name":{"type":"string"},"profilePictureUrl":{"anyOf":[{"type":"string"},{"type":"null"}]}},"required":["userId","name","profilePictureUrl"]}},"required":["token","user"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/upload/upload-url":{"post":{"summary":"Get pre-signed URL","tags":["Upload"],"description":"Get a pre-signed URL for video uploads","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"}},"required":["title","description"]}}},"required":true},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string"},"videoId":{"type":"string"}},"required":["url","videoId"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/upload/transcode-video":{"post":{"summary":"Transcode video","tags":["Upload"],"description":"Transcode a video","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"videoID":{"type":"string"}},"required":["videoID"]}}},"required":true},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"string"}},"required":["success"]}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/upload/sse/{videoID}":{"get":{"summary":"Get transcoding percentage","tags":["Upload"],"description":"Get transcoding percentage","parameters":[{"schema":{"type":"string"},"in":"path","name":"videoID","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response"}}}},"/upload/ws/{videoID}":{"get":{"summary":"Get transcoding percentage","tags":["Upload"],"description":"Get transcoding percentage","parameters":[{"schema":{"type":"string"},"in":"path","name":"videoID","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response"}}}},"/user/":{"put":{"summary":"Updates the current user's profile information","tags":["User"],"description":"Update user profile","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"password":{"type":"string"}}}}}},"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}},"get":{"summary":"Retrieves the profile information of the currently authenticated user","tags":["User"],"description":"Get current user","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"userId":{"type":"string"},"name":{"type":"string"}},"required":["userId","name"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}},"delete":{"summary":"Permanently removes the current user's account","tags":["User"],"description":"Delete current user","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]}}}},"401":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/user/{userId}/subscribe":{"post":{"summary":"Toggles the subscription status to another user's channel","tags":["User"],"description":"Subscribe or unsubscribe from a user","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"isUserSubscribed":{"type":"boolean"}},"required":["isUserSubscribed"]}}},"required":true},"parameters":[{"schema":{"type":"string"},"in":"path","name":"userId","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"subscriptionStatus":{"type":"boolean"}},"required":["subscriptionStatus"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}},"get":{"summary":"Checks if the current user is subscribed to a specific channel","tags":["User"],"description":"Check subscription status","parameters":[{"schema":{"type":"string"},"in":"path","name":"userId","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"subscriptionStatus":{"type":"boolean"}},"required":["subscriptionStatus"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/video/all-videos":{"get":{"summary":"Retrieves a paginated list of all public videos","tags":["Video"],"description":"Get all public videos with pagination","parameters":[{"schema":{"minimum":0,"type":"integer"},"in":"query","name":"skip","required":true},{"schema":{"minimum":1,"maximum":100,"type":"integer"},"in":"query","name":"take","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"uploadDate":{"format":"date-time","type":"string"}},"required":["id","userId","title","uploadDate"]}}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/video/subscriptions":{"get":{"summary":"Retrieves a paginated list of videos from channels the user is subscribed to","tags":["Video"],"description":"Get subscription videos for a user","parameters":[{"schema":{"minimum":0,"type":"integer"},"in":"query","name":"skip","required":true},{"schema":{"minimum":1,"maximum":100,"type":"integer"},"in":"query","name":"take","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"uploadDate":{"format":"date-time","type":"string"}},"required":["id","userId","title","uploadDate"]}}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/video/{videoId}":{"get":{"summary":"Retrieves comprehensive details of a video including likes, view count and others infos","tags":["Video"],"description":"Get detailed information about a specific video","parameters":[{"schema":{"type":"string"},"in":"path","name":"videoId","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"uploadDate":{"format":"date-time","type":"string"},"likes":{"type":"number"},"userHasLiked":{"type":"boolean"},"views":{"type":"number"},"moderationTypes":{"type":"array","items":{"type":"string"}}},"required":["id","userId","title","description","uploadDate","likes","userHasLiked","views","moderationTypes"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}},"delete":{"summary":"Deletes a video and its associated comments, likes, and views","tags":["Video"],"description":"Delete a video and all related data","parameters":[{"schema":{"type":"string"},"in":"path","name":"videoId","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"]}}}},"403":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/video/user/{userId}/videos":{"get":{"summary":"Retrieves a list of videos uploaded by a particular user","tags":["Video"],"description":"Get all videos from a specific user","parameters":[{"schema":{"type":"string"},"in":"path","name":"userId","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"uploadDate":{"format":"date-time","type":"string"}},"required":["id","userId","title","uploadDate"]}}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/video/search":{"post":{"summary":"Searches for videos matching the provided search terms","tags":["Video"],"description":"Search for videos by title","parameters":[{"schema":{"type":"string"},"in":"query","name":"q","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"userId":{"type":"string"},"title":{"type":"string"},"uploadDate":{"format":"date-time","type":"string"}},"required":["id","userId","title","uploadDate"]}}}}},"400":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"404":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/video/{videoId}/like":{"post":{"summary":"Toggles the like status of a video for the current user","tags":["Video"],"description":"Like or unlike a video","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"isLiking":{"type":"boolean"}},"required":["isLiking"]}}},"required":true},"parameters":[{"schema":{"type":"string"},"in":"path","name":"videoId","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"likes":{"type":"number"}},"required":["likes"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/video/{videoId}/comment":{"post":{"summary":"Posts a new comment on a specific video","tags":["Video"],"description":"Add a comment to a video","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"comment":{"type":"string"}},"required":["comment"]}}},"required":true},"parameters":[{"schema":{"type":"string"},"in":"path","name":"videoId","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/video/{videoId}/comments":{"get":{"summary":"Retrieves a paginated list of comments for a specific video","tags":["Video"],"description":"Get paginated comments for a video","parameters":[{"schema":{"minimum":0,"type":"integer"},"in":"query","name":"skip","required":true},{"schema":{"minimum":1,"maximum":100,"type":"integer"},"in":"query","name":"take","required":true},{"schema":{"type":"string"},"in":"path","name":"videoId","required":true}],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"comments":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"user":{"type":"object","properties":{"userId":{"type":"string"},"profilePictureUrl":{"anyOf":[{"type":"string"},{"type":"null"}]}},"required":["userId","profilePictureUrl"]},"text":{"type":"string"},"timeStamp":{"format":"date-time","type":"string"}},"required":["id","user","text","timeStamp"]}}},"required":["comments"]}}}},"500":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}}},"externalDocs":{"url":"https://swagger.io","description":"Find more info here"}}